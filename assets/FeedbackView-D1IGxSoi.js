import{l as g,m as R,p as _,q as W,s as F,b as a,h as U,v as G,o as H,x as J,_ as K,u as Q,c as w,d as t,f as x,t as d,y as E,z as C,A as X,B as $,j as M,C as T,e as q,k as Y,D as Z,g as ee,E as te,i as k}from"./index-_AQQ2yIK.js";/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=g("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=g("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=g("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=g("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=g("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=g("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=g("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);function I(s){return W()?(F(s),!0):!1}function S(s){return typeof s=="function"?s():a(s)}const z=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ce=Object.prototype.toString,de=s=>ce.call(s)==="[object Object]",ue=()=>{};function pe(s){let e;function l(){return e||(e=s()),e}return l.reset=async()=>{const c=e;e=void 0,c&&await c},l}function fe(s,e,l={}){const{immediate:c=!0}=l,u=_(!1);let i=null;function p(){i&&(clearTimeout(i),i=null)}function o(){u.value=!1,p()}function b(...v){p(),u.value=!0,i=setTimeout(()=>{u.value=!1,i=null,s(...v)},S(e))}return c&&(u.value=!0,z&&b()),I(o),{isPending:R(u),start:b,stop:o}}function ye(s){var e;const l=S(s);return(e=l==null?void 0:l.$el)!=null?e:l}const me=z?window:void 0,L=z?window.navigator:void 0;function N(...s){let e,l,c,u;if(typeof s[0]=="string"||Array.isArray(s[0])?([l,c,u]=s,e=me):[e,l,c,u]=s,!e)return ue;Array.isArray(l)||(l=[l]),Array.isArray(c)||(c=[c]);const i=[],p=()=>{i.forEach(y=>y()),i.length=0},o=(y,f,n,r)=>(y.addEventListener(f,n,r),()=>y.removeEventListener(f,n,r)),b=G(()=>[ye(e),S(u)],([y,f])=>{if(p(),!y)return;const n=de(f)?{...f}:f;i.push(...l.flatMap(r=>c.map(j=>o(y,r,j,n))))},{immediate:!0,flush:"post"}),v=()=>{b(),p()};return I(v),v}function ve(){const s=_(!1),e=J();return e&&H(()=>{s.value=!0},e),s}function D(s){const e=ve();return U(()=>(e.value,!!s()))}function B(s,e={}){const{controls:l=!1,navigator:c=L}=e,u=D(()=>c&&"permissions"in c);let i;const p=typeof s=="string"?{name:s}:s,o=_(),b=()=>{i&&(o.value=i.state)},v=pe(async()=>{if(u.value){if(!i)try{i=await c.permissions.query(p),N(i,"change",b),b()}catch{o.value="prompt"}return i}});return v(),l?{state:o,isSupported:u,query:v}:o}function be(s={}){const{navigator:e=L,read:l=!1,source:c,copiedDuring:u=1500,legacy:i=!1}=s,p=D(()=>e&&"clipboard"in e),o=B("clipboard-read"),b=B("clipboard-write"),v=U(()=>p.value||i),y=_(""),f=_(!1),n=fe(()=>f.value=!1,u);function r(){p.value&&A(o.value)?e.clipboard.readText().then(m=>{y.value=m}):y.value=P()}v.value&&l&&N(["copy","cut"],r);async function j(m=S(c)){v.value&&m!=null&&(p.value&&A(b.value)?await e.clipboard.writeText(m):O(m),y.value=m,f.value=!0,n.start())}function O(m){const h=document.createElement("textarea");h.value=m??"",h.style.position="absolute",h.style.opacity="0",document.body.appendChild(h),h.select(),document.execCommand("copy"),h.remove()}function P(){var m,h,V;return(V=(h=(m=document==null?void 0:document.getSelection)==null?void 0:m.call(document))==null?void 0:h.toString())!=null?V:""}function A(m){return m==="granted"||m==="prompt"}return{isSupported:v,text:y,copied:f,copy:j}}const he={class:"feedback-view"},_e={class:"header animate-fade-up"},ke={class:"content animate-fade-up delay-100"},ge={class:"card glass-card"},we={class:"desc"},xe={class:"form-group"},Ce={class:"select-wrapper"},Se={value:"bug"},je={value:"suggestion"},Me={value:"other"},Te={class:"form-group"},qe=["placeholder"],ze={class:"form-group"},Ae={class:"radio-group"},Ve={class:"radio-text"},Ee={class:"radio-text"},$e={class:"radio-text"},Be={class:"form-group"},Ue=["placeholder"],Ie={class:"actions"},Le=["disabled"],Ne={key:0,class:"loading-state"},De={key:1,class:"success-state"},Oe={key:2},Pe={key:0,class:"error-msg animate-fade-in"},Re={class:"contact-info"},We={key:0,class:"copy-hint"},Fe={__name:"FeedbackView",setup(s){const{t:e}=Q(),l=ee(),{copy:c}=be(),u=_(!1),i=_(!1),p=_(null),o=te({type:"bug",subject:"",priority:"medium",details:""}),b=async()=>{if(!i.value){i.value=!0,p.value=null;try{if((await fetch("https://formsubmit.co/ajax/happy_games@vip.qq.com",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({_subject:`[MBTI Feedback] [${o.type.toUpperCase()}] ${o.subject}`,type:o.type,priority:o.priority,message:o.details,_template:"table",_captcha:"false"})})).ok)p.value="success",o.subject="",o.details="",o.priority="medium";else throw new Error("Network response was not ok")}catch(f){console.error("Email send failed:",f),p.value="error"}finally{i.value=!1}}},v=()=>{const f="happy_games@vip.qq.com",n=`[MBTI Feedback] [${o.type.toUpperCase()}] ${o.subject}`,r=`Type: ${o.type}
Priority: ${o.priority}

Details:
${o.details}

------------------
Sent from MBTI Web App`.trim();window.location.href=`mailto:${f}?subject=${encodeURIComponent(n)}&body=${encodeURIComponent(r)}`},y=()=>{c("happy_games@vip.qq.com"),u.value=!0,setTimeout(()=>{u.value=!1},2e3)};return(f,n)=>(k(),w("div",he,[t("div",_e,[t("button",{class:"back-btn",onClick:n[0]||(n[0]=r=>a(l).back())},[x(a(oe),{size:20})]),t("h1",null,d(a(e)("feedback.title")),1)]),t("div",ke,[t("div",ge,[t("p",we,d(a(e)("feedback.desc")),1),t("form",{onSubmit:E(b,["prevent"]),class:"feedback-form"},[t("div",xe,[t("label",null,d(a(e)("feedback.type")),1),t("div",Ce,[C(t("select",{"onUpdate:modelValue":n[1]||(n[1]=r=>o.type=r)},[t("option",Se,d(a(e)("feedback.types.bug")),1),t("option",je,d(a(e)("feedback.types.suggestion")),1),t("option",Me,d(a(e)("feedback.types.other")),1)],512),[[X,o.type]]),x(a(se),{size:16,class:"select-arrow"})])]),t("div",Te,[t("label",null,d(a(e)("feedback.subject")),1),C(t("input",{type:"text","onUpdate:modelValue":n[2]||(n[2]=r=>o.subject=r),placeholder:a(e)("feedback.placeholders.subject"),required:""},null,8,qe),[[$,o.subject]])]),t("div",ze,[t("label",null,d(a(e)("feedback.priority")),1),t("div",Ae,[t("label",{class:M(["radio-label",{active:o.priority==="low"}])},[C(t("input",{type:"radio","onUpdate:modelValue":n[3]||(n[3]=r=>o.priority=r),value:"low"},null,512),[[T,o.priority]]),t("span",Ve,d(a(e)("feedback.priorities.low")),1)],2),t("label",{class:M(["radio-label",{active:o.priority==="medium"}])},[C(t("input",{type:"radio","onUpdate:modelValue":n[4]||(n[4]=r=>o.priority=r),value:"medium"},null,512),[[T,o.priority]]),t("span",Ee,d(a(e)("feedback.priorities.medium")),1)],2),t("label",{class:M(["radio-label",{active:o.priority==="high"}])},[C(t("input",{type:"radio","onUpdate:modelValue":n[5]||(n[5]=r=>o.priority=r),value:"high"},null,512),[[T,o.priority]]),t("span",$e,d(a(e)("feedback.priorities.high")),1)],2)])]),t("div",Be,[t("label",null,d(a(e)("feedback.details")),1),C(t("textarea",{"onUpdate:modelValue":n[6]||(n[6]=r=>o.details=r),rows:"6",placeholder:a(e)("feedback.placeholders.details"),required:""},null,8,Ue),[[$,o.details]])]),t("div",Ie,[t("button",{type:"submit",class:"submit-btn",disabled:i.value||p.value==="success"},[i.value?(k(),w("span",Ne,[x(a(le),{size:18,class:"spin"}),q(" "+d(a(e)("feedback.sending")),1)])):p.value==="success"?(k(),w("span",De,[x(a(ne),{size:18}),q(" "+d(a(e)("feedback.sent_success")),1)])):(k(),w("span",Oe,[x(a(re),{size:18}),q(" "+d(a(e)("feedback.send")),1)]))],8,Le)]),p.value==="error"?(k(),w("div",Pe,[x(a(ae),{size:16}),t("span",null,d(a(e)("feedback.send_fail")),1),t("a",{href:"#",onClick:E(v,["prevent"])},d(a(e)("feedback.retry_mailto")),1)])):Y("",!0)],32),n[8]||(n[8]=t("div",{class:"divider"},null,-1)),t("div",Re,[t("p",null,d(a(e)("feedback.email_label")),1),t("div",{class:"email-box",onClick:y},[n[7]||(n[7]=t("code",null,"happy_games@vip.qq.com",-1)),u.value?(k(),w("span",We,d(a(e)("feedback.copied")),1)):(k(),Z(a(ie),{key:1,size:16}))])])])])]))}},He=K(Fe,[["__scopeId","data-v-37385a53"]]);export{He as default};
